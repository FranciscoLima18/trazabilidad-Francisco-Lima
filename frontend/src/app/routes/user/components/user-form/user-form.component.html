<form (ngSubmit)="onSubmit()">
  <ion-grid class="ion-text-center">
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-sm="8" size-md="6">
        <h2>{{ isEditMode() ? "Editar usuario" : "Crear nuevo usuario" }}</h2>
      </ion-col>
    </ion-row>

    <!-- Email -->
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-sm="8" size-md="6">
        <ion-input
          labelPlacement="floating"
          fill="solid"
          label="Correo"
          name="email"
          required
          minlength="3"
          [value]="email()"
          (ionInput)="onEmailChange($event.target.value)"
        >
        </ion-input>
        <div class="error-msg">
          {{ "email" | fieldError : email() : allValues() : touched().email }}
        </div>
      </ion-col>
    </ion-row>

    <!-- Contraseña -->
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-sm="8" size-md="6">
        <ion-input
          labelPlacement="floating"
          fill="solid"
          label="Contraseña"
          name="password"
          required
          minlength="3"
          type="password"
          [value]="password()"
          (ionInput)="onPasswordChange($event.target.value)"
        >
        </ion-input>
        <div class="error-msg">
          {{
            "password"
              | fieldError : password() : allValues() : touched().password
          }}
        </div>
      </ion-col>
    </ion-row>

    <!-- Repetir contraseña -->
    <ion-row class="ion-justify-content-center" *ngIf="!isEditMode()">
      <ion-col size="12" size-sm="8" size-md="6">
        <ion-input
          labelPlacement="floating"
          fill="solid"
          label="Repetir Contraseña"
          name="repeatpassword"
          required
          minlength="3"
          type="password"
          [value]="repeatPassword()"
          (ionInput)="onRepeatPasswordChange($event.target.value)"
        >
        </ion-input>
        <div class="error-msg">
          {{
            "repeatPassword"
              | fieldError
                : repeatPassword()
                : allValues()
                : touched().repeatPassword
          }}
        </div>
      </ion-col>
    </ion-row>

    <!-- Rol -->
    <ion-row class="ion-justify-content-center" *ngIf="showRoleSelect()">
      <ion-col size="12" size-sm="8" size-md="6">
        <ion-select
          label="Rol"
          name="role_id"
          interface="popover"
          required
          [value]="role_id()"
          (ionChange)="onRoleChange($event.detail.value)"
        >
          <ion-select-option [value]="1">Operador Autorizado</ion-select-option>
          <ion-select-option [value]="2">Consulta</ion-select-option>
          <ion-select-option [value]="3">Administrador</ion-select-option>
        </ion-select>
        <div class="error-msg">
          {{
            "role_id" | fieldError : role_id() : allValues() : touched().role
          }}
        </div>
      </ion-col>
    </ion-row>

    <!-- Botón -->
    <ion-row class="ion-justify-content-center ion-padding-top">
      <ion-col size="12" size-sm="8" size-md="6">
        <ion-button
          expand="block"
          shape="round"
          type="submit"
          [disabled]="!formValid() || loading()"
        >
          {{ isEditMode() ? "Guardar cambios" : "Registrar" }}
        </ion-button>
        <ion-button
          expand="block"
          shape="round"
          type="button"
          (click)="onCancel()"
        >
          Cancelar
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</form>
